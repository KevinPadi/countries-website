{
  "version": 3,
  "sources": ["../../wouter/matcher.js", "../../wouter/index.js"],
  "sourcesContent": ["// creates a matcher function\nexport default function makeMatcher(makeRegexpFn = pathToRegexp) {\n  let cache = {};\n\n  // obtains a cached regexp version of the pattern\n  const getRegexp = (pattern) =>\n    cache[pattern] || (cache[pattern] = makeRegexpFn(pattern));\n\n  return (pattern, path) => {\n    const { regexp, keys } = getRegexp(pattern || \"\");\n    const out = regexp.exec(path);\n\n    if (!out) return [false, null];\n\n    // formats an object with matched params\n    const params = keys.reduce((params, key, i) => {\n      params[key.name] = out[i + 1];\n      return params;\n    }, {});\n\n    return [true, params];\n  };\n}\n\n// escapes a regexp string (borrowed from path-to-regexp sources)\n// https://github.com/pillarjs/path-to-regexp/blob/v3.0.0/index.js#L202\nconst escapeRx = (str) => str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n\n// returns a segment representation in RegExp based on flags\n// adapted and simplified version from path-to-regexp sources\nconst rxForSegment = (repeat, optional, prefix) => {\n  let capture = repeat ? \"((?:[^\\\\/]+?)(?:\\\\/(?:[^\\\\/]+?))*)\" : \"([^\\\\/]+?)\";\n  if (optional && prefix) capture = \"(?:\\\\/\" + capture + \")\";\n  return capture + (optional ? \"?\" : \"\");\n};\n\nconst pathToRegexp = (pattern) => {\n  const groupRx = /:([A-Za-z0-9_]+)([?+*]?)/g;\n\n  let match = null,\n    lastIndex = 0,\n    keys = [],\n    result = \"\";\n\n  while ((match = groupRx.exec(pattern)) !== null) {\n    const [_, segment, mod] = match;\n\n    // :foo  [1]      (  )\n    // :foo? [0 - 1]  ( o)\n    // :foo+ [1 - ∞]  (r )\n    // :foo* [0 - ∞]  (ro)\n    const repeat = mod === \"+\" || mod === \"*\";\n    const optional = mod === \"?\" || mod === \"*\";\n    const prefix = optional && pattern[match.index - 1] === \"/\" ? 1 : 0;\n\n    const prev = pattern.substring(lastIndex, match.index - prefix);\n\n    keys.push({ name: segment });\n    lastIndex = groupRx.lastIndex;\n\n    result += escapeRx(prev) + rxForSegment(repeat, optional, prefix);\n  }\n\n  result += escapeRx(pattern.substring(lastIndex));\n  return { keys, regexp: new RegExp(\"^\" + result + \"(?:\\\\/)?$\", \"i\") };\n};\n", "import locationHook from \"./use-location.js\";\nimport matcherWithCache from \"./matcher.js\";\n\nimport {\n  useContext,\n  createContext,\n  isValidElement,\n  cloneElement,\n  createElement as h,\n  Fragment,\n  useState,\n  forwardRef,\n  useIsomorphicLayoutEffect,\n  useEvent,\n  useInsertionEffect,\n} from \"./react-deps.js\";\n\n/*\n * Router and router context. Router is a lightweight object that represents the current\n * routing options: how location is managed, base path etc.\n *\n * There is a default router present for most of the use cases, however it can be overridden\n * via the <Router /> component.\n */\n\nconst defaultRouter = {\n  hook: locationHook,\n  matcher: matcherWithCache(),\n  base: \"\",\n  // this option is used to override the current location during SSR\n  // ssrPath: undefined,\n};\n\nconst RouterCtx = createContext(defaultRouter);\n\n// gets the closest parent router from the context\nexport const useRouter = () => useContext(RouterCtx);\n\n/*\n * Part 1, Hooks API: useRoute, useLocation and useParams\n */\n\n// Internal version of useLocation to avoid redundant useRouter calls\nconst useLocationFromRouter = (router) => router.hook(router);\n\nexport const useLocation = () => useLocationFromRouter(useRouter());\n\nexport const useRoute = (pattern) => {\n  const router = useRouter();\n  const [path] = useLocationFromRouter(router);\n  return router.matcher(pattern, path);\n};\n\nconst ParamsCtx = createContext({ params: {} });\nexport const useParams = () => useContext(ParamsCtx).params;\n\n/*\n * Part 2, Low Carb Router API: Router, Route, Link, Switch\n */\n\nexport const Router = ({\n  hook,\n  matcher,\n  ssrPath,\n  base = \"\",\n  parent,\n  children,\n}) => {\n  // updates the current router with the props passed down to the component\n  const updateRouter = (router, proto = parent || defaultRouter) => {\n    router.hook = hook || proto.hook;\n    router.matcher = matcher || proto.matcher;\n    router.ssrPath = ssrPath || proto.ssrPath;\n    router.ownBase = base;\n\n    // store reference to parent router\n    router.parent = parent;\n\n    return router;\n  };\n\n  // we use `useState` here, but it only catches the first render and never changes.\n  // https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n  const [value] = useState(() =>\n    updateRouter({\n      // We must store base as a property accessor because effects\n      // somewhat counter-intuitively run in child components *first*!\n      // This means that by the time a parent's base is updated in the\n      // parent effect, the child effect has already run, and saw\n      // the parent's *previous* base during its own execution.\n      get base() {\n        return (value.parent || defaultRouter).base + value.ownBase;\n      },\n    })\n  ); // create the object once...\n  useInsertionEffect(() => {\n    updateRouter(value);\n  }); // ...then update it on each render\n\n  return h(RouterCtx.Provider, {\n    value,\n    children,\n  });\n};\n\n// Helper to wrap children component inside the ParamsCtx provider\nconst ParamsWrapper = (params, children) =>\n  h(ParamsCtx.Provider, {\n    value: { params },\n    children,\n  });\n\nexport const Route = ({ path, match, component, children }) => {\n  const useRouteMatch = useRoute(path);\n\n  // `props.match` is present - Route is controlled by the Switch\n  const [matches, params] = match || useRouteMatch;\n\n  if (!matches) return null;\n\n  // React-Router style `component` prop\n  if (component) return ParamsWrapper(params, h(component, { params }));\n\n  // support render prop or plain children\n  return ParamsWrapper(\n    params,\n    typeof children === \"function\" ? children(params) : children\n  );\n};\n\nexport const Link = forwardRef((props, ref) => {\n  const router = useRouter();\n  const [, navigate] = useLocationFromRouter(router);\n\n  const { to, href = to, children, onClick } = props;\n\n  const handleClick = useEvent((event) => {\n    // ignores the navigation when clicked using right mouse button or\n    // by holding a special modifier key: ctrl, command, win, alt, shift\n    if (\n      event.ctrlKey ||\n      event.metaKey ||\n      event.altKey ||\n      event.shiftKey ||\n      event.button !== 0\n    )\n      return;\n\n    onClick && onClick(event);\n    if (!event.defaultPrevented) {\n      event.preventDefault();\n      navigate(to || href, props);\n    }\n  });\n\n  // wraps children in `a` if needed\n  const extraProps = {\n    // handle nested routers and absolute paths\n    href: href[0] === \"~\" ? href.slice(1) : router.base + href,\n    onClick: handleClick,\n    to: null,\n    ref,\n  };\n  const jsx = isValidElement(children) ? children : h(\"a\", props);\n\n  return cloneElement(jsx, extraProps);\n});\n\nconst flattenChildren = (children) => {\n  return Array.isArray(children)\n    ? [].concat(\n        ...children.map((c) =>\n          c && c.type === Fragment\n            ? flattenChildren(c.props.children)\n            : flattenChildren(c)\n        )\n      )\n    : [children];\n};\n\nexport const Switch = ({ children, location }) => {\n  const router = useRouter();\n  const matcher = router.matcher;\n  const [originalLocation] = useLocationFromRouter(router);\n\n  for (const element of flattenChildren(children)) {\n    let match = 0;\n\n    if (\n      isValidElement(element) &&\n      // we don't require an element to be of type Route,\n      // but we do require it to contain a truthy `path` prop.\n      // this allows to use different components that wrap Route\n      // inside of a switch, for example <AnimatedRoute />.\n      (match = element.props.path\n        ? matcher(element.props.path, location || originalLocation)\n        : [true, {}])[0]\n    )\n      return cloneElement(element, { match });\n  }\n\n  return null;\n};\n\nexport const Redirect = (props) => {\n  const { to, href = to } = props;\n  const [, navigate] = useLocation();\n  const redirect = useEvent(() => navigate(to || href, props));\n\n  // redirect is guaranteed to be stable since it is returned from useEvent\n  useIsomorphicLayoutEffect(() => {\n    redirect();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return null;\n};\n\nexport default useRoute;\n"],
  "mappings": ";;;;;;;;;;AACe,SAAR,YAA6B,eAAe,cAAc;AAC/D,MAAI,QAAQ,CAAC;AAGb,QAAM,YAAY,CAAC,YACjB,MAAM,OAAO,MAAM,MAAM,OAAO,IAAI,aAAa,OAAO;AAE1D,SAAO,CAAC,SAAS,SAAS;AACxB,UAAM,EAAE,QAAQ,KAAK,IAAI,UAAU,WAAW,EAAE;AAChD,UAAM,MAAM,OAAO,KAAK,IAAI;AAE5B,QAAI,CAAC;AAAK,aAAO,CAAC,OAAO,IAAI;AAG7B,UAAM,SAAS,KAAK,OAAO,CAACA,SAAQ,KAAK,MAAM;AAC7C,MAAAA,QAAO,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC;AAC5B,aAAOA;AAAA,IACT,GAAG,CAAC,CAAC;AAEL,WAAO,CAAC,MAAM,MAAM;AAAA,EACtB;AACF;AAIA,IAAM,WAAW,CAAC,QAAQ,IAAI,QAAQ,6BAA6B,MAAM;AAIzE,IAAM,eAAe,CAAC,QAAQ,UAAU,WAAW;AACjD,MAAI,UAAU,SAAS,uCAAuC;AAC9D,MAAI,YAAY;AAAQ,cAAU,WAAW,UAAU;AACvD,SAAO,WAAW,WAAW,MAAM;AACrC;AAEA,IAAM,eAAe,CAAC,YAAY;AAChC,QAAM,UAAU;AAEhB,MAAI,QAAQ,MACV,YAAY,GACZ,OAAO,CAAC,GACR,SAAS;AAEX,UAAQ,QAAQ,QAAQ,KAAK,OAAO,OAAO,MAAM;AAC/C,UAAM,CAAC,GAAG,SAAS,GAAG,IAAI;AAM1B,UAAM,SAAS,QAAQ,OAAO,QAAQ;AACtC,UAAM,WAAW,QAAQ,OAAO,QAAQ;AACxC,UAAM,SAAS,YAAY,QAAQ,MAAM,QAAQ,CAAC,MAAM,MAAM,IAAI;AAElE,UAAM,OAAO,QAAQ,UAAU,WAAW,MAAM,QAAQ,MAAM;AAE9D,SAAK,KAAK,EAAE,MAAM,QAAQ,CAAC;AAC3B,gBAAY,QAAQ;AAEpB,cAAU,SAAS,IAAI,IAAI,aAAa,QAAQ,UAAU,MAAM;AAAA,EAClE;AAEA,YAAU,SAAS,QAAQ,UAAU,SAAS,CAAC;AAC/C,SAAO,EAAE,MAAM,QAAQ,IAAI,OAAO,MAAM,SAAS,aAAa,GAAG,EAAE;AACrE;;;ACxCA,IAAM,gBAAgB;AAAA,EACpB,MAAM;AAAA,EACN,SAAS,YAAiB;AAAA,EAC1B,MAAM;AAAA;AAAA;AAGR;AAEA,IAAM,gBAAY,4BAAc,aAAa;AAGtC,IAAM,YAAY,UAAM,yBAAW,SAAS;AAOnD,IAAM,wBAAwB,CAAC,WAAW,OAAO,KAAK,MAAM;AAErD,IAAM,cAAc,MAAM,sBAAsB,UAAU,CAAC;AAE3D,IAAM,WAAW,CAAC,YAAY;AACnC,QAAM,SAAS,UAAU;AACzB,QAAM,CAAC,IAAI,IAAI,sBAAsB,MAAM;AAC3C,SAAO,OAAO,QAAQ,SAAS,IAAI;AACrC;AAEA,IAAM,gBAAY,4BAAc,EAAE,QAAQ,CAAC,EAAE,CAAC;AACvC,IAAM,YAAY,UAAM,yBAAW,SAAS,EAAE;AAM9C,IAAM,SAAS,CAAC;AAAA,EACrB;AAAA,EACA;AAAA,EACA;AAAA,EACA,OAAO;AAAA,EACP;AAAA,EACA;AACF,MAAM;AAEJ,QAAM,eAAe,CAAC,QAAQ,QAAQ,UAAU,kBAAkB;AAChE,WAAO,OAAO,QAAQ,MAAM;AAC5B,WAAO,UAAU,WAAW,MAAM;AAClC,WAAO,UAAU,WAAW,MAAM;AAClC,WAAO,UAAU;AAGjB,WAAO,SAAS;AAEhB,WAAO;AAAA,EACT;AAIA,QAAM,CAAC,KAAK,QAAI;AAAA,IAAS,MACvB,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMX,IAAI,OAAO;AACT,gBAAQ,MAAM,UAAU,eAAe,OAAO,MAAM;AAAA,MACtD;AAAA,IACF,CAAC;AAAA,EACH;AACA,qBAAmB,MAAM;AACvB,iBAAa,KAAK;AAAA,EACpB,CAAC;AAED,aAAO,4BAAE,UAAU,UAAU;AAAA,IAC3B;AAAA,IACA;AAAA,EACF,CAAC;AACH;AAGA,IAAM,gBAAgB,CAAC,QAAQ,iBAC7B,4BAAE,UAAU,UAAU;AAAA,EACpB,OAAO,EAAE,OAAO;AAAA,EAChB;AACF,CAAC;AAEI,IAAM,QAAQ,CAAC,EAAE,MAAM,OAAO,WAAW,SAAS,MAAM;AAC7D,QAAM,gBAAgB,SAAS,IAAI;AAGnC,QAAM,CAAC,SAAS,MAAM,IAAI,SAAS;AAEnC,MAAI,CAAC;AAAS,WAAO;AAGrB,MAAI;AAAW,WAAO,cAAc,YAAQ,4BAAE,WAAW,EAAE,OAAO,CAAC,CAAC;AAGpE,SAAO;AAAA,IACL;AAAA,IACA,OAAO,aAAa,aAAa,SAAS,MAAM,IAAI;AAAA,EACtD;AACF;AAEO,IAAM,WAAO,yBAAW,CAAC,OAAO,QAAQ;AAC7C,QAAM,SAAS,UAAU;AACzB,QAAM,CAAC,EAAE,QAAQ,IAAI,sBAAsB,MAAM;AAEjD,QAAM,EAAE,IAAI,OAAO,IAAI,UAAU,QAAQ,IAAI;AAE7C,QAAM,cAAc,SAAS,CAAC,UAAU;AAGtC,QACE,MAAM,WACN,MAAM,WACN,MAAM,UACN,MAAM,YACN,MAAM,WAAW;AAEjB;AAEF,eAAW,QAAQ,KAAK;AACxB,QAAI,CAAC,MAAM,kBAAkB;AAC3B,YAAM,eAAe;AACrB,eAAS,MAAM,MAAM,KAAK;AAAA,IAC5B;AAAA,EACF,CAAC;AAGD,QAAM,aAAa;AAAA;AAAA,IAEjB,MAAM,KAAK,CAAC,MAAM,MAAM,KAAK,MAAM,CAAC,IAAI,OAAO,OAAO;AAAA,IACtD,SAAS;AAAA,IACT,IAAI;AAAA,IACJ;AAAA,EACF;AACA,QAAM,UAAM,6BAAe,QAAQ,IAAI,eAAW,4BAAE,KAAK,KAAK;AAE9D,aAAO,2BAAa,KAAK,UAAU;AACrC,CAAC;AAED,IAAM,kBAAkB,CAAC,aAAa;AACpC,SAAO,MAAM,QAAQ,QAAQ,IACzB,CAAC,EAAE;AAAA,IACD,GAAG,SAAS;AAAA,MAAI,CAAC,MACf,KAAK,EAAE,SAAS,wBACZ,gBAAgB,EAAE,MAAM,QAAQ,IAChC,gBAAgB,CAAC;AAAA,IACvB;AAAA,EACF,IACA,CAAC,QAAQ;AACf;AAEO,IAAM,SAAS,CAAC,EAAE,UAAU,SAAS,MAAM;AAChD,QAAM,SAAS,UAAU;AACzB,QAAM,UAAU,OAAO;AACvB,QAAM,CAAC,gBAAgB,IAAI,sBAAsB,MAAM;AAEvD,aAAW,WAAW,gBAAgB,QAAQ,GAAG;AAC/C,QAAI,QAAQ;AAEZ,YACE,6BAAe,OAAO;AAAA;AAAA;AAAA;AAAA,KAKrB,QAAQ,QAAQ,MAAM,OACnB,QAAQ,QAAQ,MAAM,MAAM,YAAY,gBAAgB,IACxD,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC;AAEjB,iBAAO,2BAAa,SAAS,EAAE,MAAM,CAAC;AAAA,EAC1C;AAEA,SAAO;AACT;AAEO,IAAM,WAAW,CAAC,UAAU;AACjC,QAAM,EAAE,IAAI,OAAO,GAAG,IAAI;AAC1B,QAAM,CAAC,EAAE,QAAQ,IAAI,YAAY;AACjC,QAAM,WAAW,SAAS,MAAM,SAAS,MAAM,MAAM,KAAK,CAAC;AAG3D,4BAA0B,MAAM;AAC9B,aAAS;AAAA,EACX,GAAG,CAAC,CAAC;AAEL,SAAO;AACT;AAEA,IAAO,iBAAQ;",
  "names": ["params"]
}
